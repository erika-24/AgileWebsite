<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - CardioGuard</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <style>
        /* Products Page Styles - Dark Theme to Match Pricing */
        .products-page {
            background: #0a0a0a;
            min-height: 100vh;
            color: #ffffff;
        }

        .container-products {
            max-width: 1200px;
            margin: 0 auto;
            padding: 100px 20px 60px;
        }

        .products-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .products-header h1 {
            font-size: 3rem;
            color: #ffffff;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .products-header p {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            max-width: 600px;
            margin: 0 auto;
        }

        .product-intro {
            max-width: 720px;
            margin: 0 auto 48px;
            padding: 24px 28px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }

        .product-intro p {
            margin: 0;
            font-size: 1.05rem;
            line-height: 1.75;
            color: rgba(255, 255, 255, 0.82);
        }

        .product-intro strong {
            color: #fff;
        }

        /* Product card: usage instruction (collapsible with +) */
        .product-usage-details {
            margin-top: 14px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            overflow: hidden;
        }

        .product-usage-details summary {
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 14px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            font-size: 0.95rem;
            user-select: none;
        }

        .product-usage-details summary::-webkit-details-marker,
        .product-usage-details summary::marker {
            display: none;
        }

        .product-usage-details .usage-plus {
            flex-shrink: 0;
            width: 24px;
            height: 24px;
            margin-left: 10px;
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 6px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 700;
            transition: transform 0.25s ease, border-color 0.2s ease;
        }

        .product-usage-details[open] .usage-plus {
            transform: rotate(45deg);
        }

        .product-usage-details .usage-label {
            flex: 1;
        }

        .product-usage-list {
            margin: 0 0 14px 0;
            padding: 0 14px 14px 22px;
            color: rgba(255, 255, 255, 0.82);
            font-size: 0.95rem;
            line-height: 1.75;
        }

        .product-usage-list li {
            margin-bottom: 6px;
        }

        .product-usage-list li:last-child {
            margin-bottom: 0;
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 35px;
        }

        /* Product Card - Dark Theme */
        .product-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
            border-color: rgba(102, 126, 234, 0.5);
        }

        /* Product Image */
        .product-image {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 300px;
        }

        .product-image img {
            max-width: 100%;
            max-height: 240px;
            object-fit: contain;
            filter: drop-shadow(0 8px 16px rgba(0, 0, 0, 0.3));
        }

        /* Product Info */
        .product-info {
            padding: 35px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            flex: 1;
        }

        .product-name {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 4px;
        }

        .product-description {
            color: rgba(255, 255, 255, 0.7);
            line-height: 1.8;
            font-size: 1.05rem;
        }

        /* Badge */
        .product-badge {
            display: inline-block;
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 6px;
            width: fit-content;
        }

        /* Price Tag */
        .product-price {
            font-size: 2rem;
            font-weight: 700;
            color: #667eea;
            margin: 10px 0 0;
        }

        .product-price span {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.5);
            font-weight: 400;
        }

        /* Key Features List */
        .product-features {
            list-style: none;
            padding: 0;
            margin: 10px 0 0;
        }

        .product-features li {
            padding: 8px 0;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .product-features li:last-child {
            border-bottom: none;
        }

        .product-features li:before {
            content: "âœ“";
            color: #667eea;
            font-weight: bold;
            margin-right: 10px;
        }

        /* --- NEW: Action Buttons --- */
        .product-actions {
            margin-top: auto;
            display: flex;
            gap: 12px;
            padding-top: 12px;
        }

        .btn-action {
            border: 1px solid rgba(255, 255, 255, 0.14);
            background: rgba(255, 255, 255, 0.06);
            color: #ffffff;
            padding: 12px 14px;
            border-radius: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.25s ease;
            font-family: "DM Sans", sans-serif;
            width: 100%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-action:hover {
            transform: translateY(-2px);
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.18);
        }

        .btn-primary-action {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 0;
        }

        .btn-primary-action:hover {
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }

        /* --- NEW: Floating Cart Button --- */
        .cart-fab {
            position: fixed;
            top: 92px; /* below navbar */
            right: 18px;
            z-index: 9999;
            border: 1px solid rgba(255,255,255,0.14);
            background: rgba(10,10,10,0.8);
            backdrop-filter: blur(10px);
            color: #fff;
            padding: 12px 14px;
            border-radius: 999px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            transition: transform 0.2s ease, border-color 0.2s ease;
            font-family: "DM Sans", sans-serif;
            font-weight: 700;
        }
        .cart-fab:hover { transform: translateY(-2px); border-color: rgba(102,126,234,0.55); }

        .cart-count {
            min-width: 26px;
            height: 26px;
            border-radius: 999px;
            background: rgba(102,126,234,0.25);
            border: 1px solid rgba(102,126,234,0.5);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            padding: 0 8px;
        }

        /* --- NEW: Cart Drawer --- */
        .cart-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.55);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease;
            z-index: 9998;
        }
        .cart-overlay.open { opacity: 1; pointer-events: auto; }

        .cart-drawer {
            position: fixed;
            top: 0;
            right: 0;
            height: 100vh;
            width: min(420px, 92vw);
            background: rgba(15,15,15,0.98);
            border-left: 1px solid rgba(255,255,255,0.1);
            transform: translateX(100%);
            transition: transform 0.25s ease;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            font-family: "DM Sans", sans-serif;
        }
        .cart-drawer.open { transform: translateX(0); }

        .cart-header {
            padding: 18px 18px 14px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        .cart-header h3 { margin: 0; font-size: 1.3rem; }
        .cart-close {
            background: transparent;
            color: rgba(255,255,255,0.8);
            border: 1px solid rgba(255,255,255,0.14);
            border-radius: 12px;
            padding: 8px 10px;
            cursor: pointer;
            font-weight: 700;
        }

        .cart-items {
            padding: 14px 18px;
            overflow: auto;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .cart-item {
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 12px;
            background: rgba(255,255,255,0.04);
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 10px;
        }

        .cart-item-title { font-weight: 700; margin: 0 0 4px; }
        .cart-item-meta { color: rgba(255,255,255,0.7); font-size: 0.95rem; margin: 0; }

        .qty-controls {
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .qty-btn {
            width: 30px;
            height: 30px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.14);
            background: rgba(255,255,255,0.06);
            color: #fff;
            cursor: pointer;
            font-weight: 800;
        }
        .qty-display {
            min-width: 26px;
            text-align: center;
            color: rgba(255,255,255,0.9);
            font-weight: 700;
        }
        .remove-btn {
            margin-left: 8px;
            border: 0;
            background: transparent;
            color: rgba(255,255,255,0.6);
            cursor: pointer;
            font-weight: 700;
        }
        .remove-btn:hover { color: rgba(255,255,255,0.9); }

        .cart-footer {
            border-top: 1px solid rgba(255,255,255,0.08);
            padding: 14px 18px 18px;
            display: grid;
            gap: 12px;
        }
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.05rem;
            color: rgba(255,255,255,0.9);
        }
        .cart-total strong { font-size: 1.15rem; }

        .checkout-btn {
            width: 100%;
            border: 0;
            border-radius: 14px;
            padding: 14px 16px;
            cursor: pointer;
            font-weight: 800;
            color: #fff;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.25);
        }
        .clear-btn {
            width: 100%;
            border-radius: 14px;
            padding: 12px 14px;
            cursor: pointer;
            font-weight: 800;
            color: rgba(255,255,255,0.85);
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.14);
        }
        .empty-cart {
            color: rgba(255,255,255,0.7);
            border: 1px dashed rgba(255,255,255,0.18);
            border-radius: 16px;
            padding: 14px;
            text-align: center;
        }

        /* --- NEW: Toast --- */
        .toast {
            position: fixed;
            left: 50%;
            bottom: 22px;
            transform: translateX(-50%) translateY(20px);
            background: rgba(10,10,10,0.88);
            border: 1px solid rgba(255,255,255,0.14);
            color: rgba(255,255,255,0.92);
            padding: 12px 14px;
            border-radius: 14px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.25s ease, transform 0.25s ease;
            z-index: 10000;
            font-family: "DM Sans", sans-serif;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }
        .toast.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .products-header h1 {
                font-size: 2.2rem;
            }

            .products-grid {
                grid-template-columns: 1fr;
            }

            .product-image {
                min-height: 250px;
                padding: 40px;
            }

            .cart-fab { top: 86px; }
        }
    </style>
</head>
<body class="products-page">

    <header class="navbar">
        <div class="container">
            <h1 class="logo"><a href="index.html">CardioGuard</a></h1>
            <nav>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#features">Features</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="productsPage.html">Products</a></li>
                    <!-- <li><a href="pricing.html">Pricing</a></li> -->
                    <li><a href="research.html">Research</a></li>
                    <li><a href="faq.html">FAQ</a></li>
                    <li><a href="recruit.html">Careers</a></li>
                    <li><a href="leadership.html">Leadership</a></li>
                    <li><a href="index.html#contact" class="btn">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Floating Cart Button -->
    <button class="cart-fab" id="cartFab" aria-label="Open cart">
        ðŸ›’ Cart <span class="cart-count" id="cartCount">0</span>
    </button>

    <!-- Cart Overlay + Drawer -->
    <div class="cart-overlay" id="cartOverlay"></div>
    <aside class="cart-drawer" id="cartDrawer" aria-label="Cart drawer">
        <div class="cart-header">
            <h3>Your Cart</h3>
            <button class="cart-close" id="cartClose" aria-label="Close cart">Close</button>
        </div>

        <div class="cart-items" id="cartItems">
            <!-- injected -->
        </div>

        <div class="cart-footer">
            <div class="cart-total">
                <span>Total</span>
                <strong id="cartTotal">$0</strong>
            </div>
            <button class="checkout-btn" id="checkoutBtn">Purchase Now</button>
            <button class="clear-btn" id="clearCartBtn">Clear Cart</button>
        </div>
    </aside>

    <!-- Toast -->
    <div class="toast" id="toast" role="status" aria-live="polite"></div>

    <div class="container-products">
        <div class="products-header">
            <h1>Our Products</h1>
            <p>Professional-grade cardiac monitoring devices designed for continuous health insights</p>
        </div>

        <div class="product-intro">
            <p>CardioGuard offers a single, flagship wearable designed for round-the-clock heart health: the <strong>CardioGuard Ring</strong>. It delivers continuous cardiac monitoring, including heart rate, blood oxygen, and rhythm insights, with long battery life and seamless app pairing, so you and your care network stay informed when it matters most.</p>
        </div>

        <div class="products-grid">

            <div class="product-card"
                 data-id="ring"
                 data-name="CardioGuard Ring"
                 data-price="249"
                 data-image="images/ring.png">
                <div class="product-image">
                    <img src="images/ring.png" alt="CardioGuard Ring">
                </div>
                <div class="product-info">
                    <span class="product-badge">Most Popular</span>
                    <h3 class="product-name">CardioGuard Ring</h3>
                    <p class="product-description">
                        Wearable ring for continuous cardiac monitoring. Tracks HR, SpOâ‚‚, rhythm, and blood pressure. 5 to 7 day battery, up to 30 days offline storage. Pairs with the CardioGuard app via Bluetooth for early detection and peace of mind.
                    </p>
                    <ul class="product-features">
                        <li>5-7 day battery life</li>
                        <li>30 days offline storage</li>
                        <li>Continuous monitoring</li>
                    </ul>

                    <details class="product-usage-details">
                        <summary>
                            <span class="usage-label">Product Usage Instruction</span>
                            <span class="usage-plus" aria-hidden="true">+</span>
                        </summary>
                        <ol class="product-usage-list">
                            <li>Charge the ring fully before first use using the included charger.</li>
                            <li>Wear the ring on your finger as shown in the guide; ensure a snug but comfortable fit for accurate readings.</li>
                            <li>Download the CardioGuard app, create an account, and pair the ring via Bluetooth in the app settings.</li>
                            <li>Keep the ring on for continuous monitoring; recharge when the app notifies you that battery is low.</li>
                            <li>Review your heart health trends and alerts in the app and add caregiver contacts if you want them notified.</li>
                        </ol>
                    </details>

                    <div class="product-price">$249 <span>hardware</span></div>

                    <div class="product-actions">
                        <button class="btn-action" data-action="add">Add to Cart</button>
                        <button class="btn-action btn-primary-action" data-action="buy">Purchase Now</button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <footer class="footer">
        <img src="images/Logo - Cardio Guard.png" alt="CardioGuard Logo" class="footer-logo" />
        <p>Â© 2026 CardioGuard. All rights reserved.</p>
    </footer>

    <script>
        // --- Simple Cart (localStorage) ---
        const CART_KEY = "cardioguard_cart_v1";

        const els = {
            cartFab: document.getElementById("cartFab"),
            cartCount: document.getElementById("cartCount"),
            cartOverlay: document.getElementById("cartOverlay"),
            cartDrawer: document.getElementById("cartDrawer"),
            cartClose: document.getElementById("cartClose"),
            cartItems: document.getElementById("cartItems"),
            cartTotal: document.getElementById("cartTotal"),
            checkoutBtn: document.getElementById("checkoutBtn"),
            clearCartBtn: document.getElementById("clearCartBtn"),
            toast: document.getElementById("toast")
        };

        function loadCart() {
            try {
                return JSON.parse(localStorage.getItem(CART_KEY)) || {};
            } catch {
                return {};
            }
        }

        function saveCart(cart) {
            localStorage.setItem(CART_KEY, JSON.stringify(cart));
        }

        function money(n) {
            return "$" + Number(n).toFixed(2).replace(/\.00$/, "");
        }

        function cartCount(cart) {
            return Object.values(cart).reduce((sum, item) => sum + item.qty, 0);
        }

        function cartTotal(cart) {
            return Object.values(cart).reduce((sum, item) => sum + item.qty * item.price, 0);
        }

        function showToast(message) {
            els.toast.textContent = message;
            els.toast.classList.add("show");
            window.clearTimeout(showToast._t);
            showToast._t = window.setTimeout(() => els.toast.classList.remove("show"), 2200);
        }

        function openCart() {
            els.cartOverlay.classList.add("open");
            els.cartDrawer.classList.add("open");
        }

        function closeCart() {
            els.cartOverlay.classList.remove("open");
            els.cartDrawer.classList.remove("open");
        }

        function renderCart() {
            const cart = loadCart();
            const count = cartCount(cart);
            els.cartCount.textContent = count;

            const total = cartTotal(cart);
            els.cartTotal.textContent = money(total);

            const items = Object.values(cart);
            els.cartItems.innerHTML = "";

            if (items.length === 0) {
                els.cartItems.innerHTML = `<div class="empty-cart">Your cart is empty. Add a device to get started.</div>`;
                return;
            }

            for (const item of items) {
                const div = document.createElement("div");
                div.className = "cart-item";
                div.innerHTML = `
                    <div>
                        <p class="cart-item-title">${item.name}</p>
                        <p class="cart-item-meta">${money(item.price)} Â· Subtotal: ${money(item.price * item.qty)}</p>
                    </div>
                    <div style="display:flex; flex-direction:column; align-items:flex-end; gap:8px;">
                        <div class="qty-controls" data-id="${item.id}">
                            <button class="qty-btn" data-qty="dec" aria-label="Decrease quantity">âˆ’</button>
                            <span class="qty-display">${item.qty}</span>
                            <button class="qty-btn" data-qty="inc" aria-label="Increase quantity">+</button>
                            <button class="remove-btn" data-remove="${item.id}" aria-label="Remove item">Remove</button>
                        </div>
                    </div>
                `;
                els.cartItems.appendChild(div);
            }
        }

        function addToCart(product, qty = 1) {
            const cart = loadCart();
            if (!cart[product.id]) cart[product.id] = { ...product, qty: 0 };
            cart[product.id].qty += qty;
            saveCart(cart);
            renderCart();
        }

        function setQty(id, delta) {
            const cart = loadCart();
            if (!cart[id]) return;
            cart[id].qty += delta;
            if (cart[id].qty <= 0) delete cart[id];
            saveCart(cart);
            renderCart();
        }

        function removeItem(id) {
            const cart = loadCart();
            delete cart[id];
            saveCart(cart);
            renderCart();
        }

        function clearCart() {
            saveCart({});
            renderCart();
        }

        const STORAGE_KEY = "cg_checkout_state_v1";

        function checkout() {
            const cart = loadCart();
            const count = cartCount(cart);

            if (count === 0) {
                showToast("Cart is empty â€” add a product first.");
                return;
            }

            // Build checkout state: only ring is our product; default to Essential plan so checkout accepts
            const deviceIds = Object.keys(cart).filter(id => id === "ring");
            if (deviceIds.length === 0) {
                showToast("Only CardioGuard Ring can be purchased. Add the Ring to cart.");
                return;
            }

            const payload = {
                billing: "monthly",
                plan: "essential",
                devices: ["ring"]
            };

            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(payload));
            } catch (e) {}

            closeCart();
            window.location.href = "checkout.html";
        }

        // Button handlers on product cards
        document.addEventListener("click", (e) => {
            const btn = e.target.closest("button[data-action]");
            if (btn) {
                const card = btn.closest(".product-card");
                const product = {
                    id: card.dataset.id,
                    name: card.dataset.name,
                    price: Number(card.dataset.price),
                    image: card.dataset.image
                };

                const action = btn.dataset.action;
                if (action === "add") {
                    addToCart(product, 1);
                    showToast(`${product.name} added to cart`);
                } else if (action === "buy") {
                    // Purchase Now: save checkout state and go to checkout page
                    const payload = {
                        billing: "monthly",
                        plan: "essential",
                        devices: ["ring"]
                    };
                    try {
                        localStorage.setItem("cg_checkout_state_v1", JSON.stringify(payload));
                    } catch (e) {}
                    window.location.href = "checkout.html";
                }
            }

            // Cart qty controls / remove
            const qtyBtn = e.target.closest(".qty-btn");
            if (qtyBtn) {
                const parent = qtyBtn.closest("[data-id]");
                const id = parent.dataset.id;
                const direction = qtyBtn.dataset.qty;
                setQty(id, direction === "inc" ? 1 : -1);
            }

            const remove = e.target.closest("[data-remove]");
            if (remove) {
                removeItem(remove.dataset.remove);
            }
        });

        // Cart drawer controls
        els.cartFab.addEventListener("click", () => { renderCart(); openCart(); });
        els.cartClose.addEventListener("click", closeCart);
        els.cartOverlay.addEventListener("click", closeCart);
        els.checkoutBtn.addEventListener("click", checkout);
        els.clearCartBtn.addEventListener("click", () => {
            clearCart();
            showToast("Cart cleared");
        });

        // Initial render (count badge on load)
        renderCart();
    </script>

</body>
</html>